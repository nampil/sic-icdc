{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.string.trim.js","webpack:///./src/views/Login.vue?f9e5","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue"],"names":["__webpack_require__","$trim","this","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","xs12","sm6","offset-sm3","color","title","ref","on","submit","$event","preventDefault","value","hasErr","type","transition","_v","_s","errMsg","rules","required","prepend-icon","label","model","callback","$$v","usuario","expression","append-icon","show1","click:append","password","small","click","clearForm","staticRenderFns","Loginvue_type_script_lang_js_","name","data","computed","credentials","authQuery","query","concat","methods","$refs","form","reset","_this","trim","legth","$store","commit","dispatch","then","res","status","$router","push","msg","statusText","class","active","state","auth","catch","err","console","log","views_Loginvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-244415c4.a42bc3e5.js","sourcesContent":["'use strict';\n// 21.1.3.25 String.prototype.trim()\nrequire('./_string-trim')('trim', function ($trim) {\n  return function trim() {\n    return $trim(this, 3);\n  };\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('v-container',[_c('v-layout',[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"offset-sm3\":\"\"}},[_c('material-card',{staticClass:\"text-xs-center\",attrs:{\"color\":\"green\",\"title\":\"Ingresar\"}},[_c('v-form',{ref:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('v-alert',{attrs:{\"value\":_vm.hasErr,\"type\":\"error\",\"transition\":\"scale-transition\"}},[_vm._v(_vm._s(_vm.errMsg))]),_c('v-text-field',{attrs:{\"rules\":[_vm.rules.required],\"prepend-icon\":\"mdi-account\",\"required\":\"\",\"label\":\"Email\"},model:{value:(_vm.usuario),callback:function ($$v) {_vm.usuario=$$v},expression:\"usuario\"}}),_c('v-text-field',{attrs:{\"append-icon\":_vm.show1 ? 'mdi-eye-off' : 'mdi-eye',\"type\":_vm.show1 ? 'text' : 'password',\"rules\":[_vm.rules.required],\"prepend-icon\":\"mdi-key\",\"required\":\"\",\"label\":\"Clave\"},on:{\"click:append\":function($event){_vm.show1 = !_vm.show1}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('v-btn',{staticClass:\"ma-2\",attrs:{\"color\":\"primary\",\"type\":\"submit\",\"small\":\"\"}},[_vm._v(\"Enviar\")]),_c('v-btn',{staticClass:\"ma-2\",attrs:{\"color\":\"tertiary\",\"small\":\"\"},on:{\"click\":_vm.clearForm}},[_vm._v(\"Cancelar\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login\">\n    <v-container>\n      <v-layout>\n        <v-flex\n          xs12\n          sm6\n          offset-sm3\n        >\n          <material-card\n            color=\"green\"\n            title=\"Ingresar\"\n            class=\"text-xs-center\"\n          >\n            <v-form\n              ref=\"form\"\n              @submit.prevent=\"submit\"\n            >\n              <v-alert\n                :value=\"hasErr\"\n                type=\"error\"\n                transition=\"scale-transition\"\n              >{{ errMsg }}</v-alert>\n\n              <v-text-field\n                v-model=\"usuario\"\n                :rules=\"[rules.required]\"\n                prepend-icon=\"mdi-account\"\n                required\n                label=\"Email\"\n              />\n              <v-text-field\n                :append-icon=\"show1 ? 'mdi-eye-off' : 'mdi-eye'\"\n                v-model=\"password\"\n                :type=\"show1 ? 'text' : 'password'\"\n                :rules=\"[rules.required]\"\n                prepend-icon=\"mdi-key\"\n                required\n                label=\"Clave\"\n                @click:append=\"show1 = !show1\"\n              />\n              <v-btn\n                color=\"primary\"\n                class=\"ma-2\"\n                type=\"submit\"\n                small\n              >Enviar</v-btn>\n              <v-btn\n                color=\"tertiary\"\n                class=\"ma-2\"\n                @click=\"clearForm\"\n                small\n              >Cancelar</v-btn>\n            </v-form>\n          </material-card>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </div>\n</template>\n<script>\nimport axios from 'axios'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      usuario: '',\n      password: '',\n      show1: false,\n      rules: {\n        required: value => !!value || 'Necesario.'\n      },\n      errMsg: '',\n      hasErr: false\n    }\n  },\n  computed: {\n    credentials() {\n      const authQuery = {\n        query: `\n                query {\n                    login(email: \"${this.usuario}\", password: \"${\n          this.password\n        }\")\n                    {\n                        userId\n                        token\n                        tokenExpiration\n                        name\n                        role\n                    }\n                }\n            `\n      }\n      return authQuery\n    }\n  },\n  methods: {\n    clearForm() {\n      this.usuario = ''\n      this.password = ''\n      this.hasErr = false\n      this.errMsg = ''\n      this.$refs.form.reset()\n    },\n    submit() {\n      if (\n        !this.usuario ||\n        !this.password ||\n        this.usuario.trim().legth === 0 ||\n        this.password.trim().legth === 0\n      ) {\n        this.hasErr = true\n        this.errMsg = 'Todos los campos son requeridos'\n      } else {\n        this.$store.commit('loading', true)\n        this.$store\n          .dispatch('login', this.credentials)\n          .then(res => {\n            if (res.status === 200 || res.status === 201) {\n              this.$store.dispatch('startTime')\n              this.$store.dispatch('loadData')\n              this.$router.push({ name: 'Escritorio' })\n            } else {\n              this.$store.dispatch('toggleAlert', {\n                msg: `Hubo un problema. Error: ${res.status} || ${\n                  res.statusText\n                }`,\n                class: 'warning',\n                active: true\n              })\n            }\n            this.$store.commit('loading', false)\n            return res\n          })\n          .then(res => {\n            this.$store.dispatch('toggleAlert', {\n              msg: `Bienvenido ${this.$store.state.auth.name}`,\n              class: 'success',\n              active: true\n            })\n          })\n          .catch(err => console.log(err))\n\n        this.clearForm()\n        this.$store.commit('loading', false)\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=9193d33c&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Login.vue\"\nexport default component.exports"],"sourceRoot":""}