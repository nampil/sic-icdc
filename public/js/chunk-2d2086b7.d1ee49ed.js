(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2086b7"],{a55b:function(s,t,r){"use strict";r.r(t);var e=function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"login"},[r("v-layout",[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("material-card",{staticClass:"text-xs-center",attrs:{color:"green",title:"Ingresar"}},[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),s.submit(t)}}},[r("v-alert",{attrs:{value:s.hasErr,type:"error",transition:"scale-transition"}},[s._v(s._s(s.errMsg))]),r("v-text-field",{attrs:{rules:[s.rules.required],"prepend-icon":"mdi-account",required:"",label:"Email"},model:{value:s.usuario,callback:function(t){s.usuario=t},expression:"usuario"}}),r("v-text-field",{attrs:{"append-icon":s.show1?"mdi-eye-off":"mdi-eye",type:s.show1?"text":"password",rules:[s.rules.required],"prepend-icon":"mdi-key",required:"",label:"Clave"},on:{"click:append":function(t){s.show1=!s.show1}},model:{value:s.password,callback:function(t){s.password=t},expression:"password"}}),r("v-btn",{staticClass:"ma-2",attrs:{color:"primary",type:"submit"}},[s._v("Enviar")]),r("v-btn",{staticClass:"ma-2",attrs:{color:"tertiary"},on:{click:s.clearForm}},[s._v("Cancelar")])],1)],1)],1)],1)],1)},a=[],o=(r("7f7f"),r("bc3a"),r("2f62"),{name:"Login",data:function(){return{usuario:"",password:"",show1:!1,rules:{required:function(s){return!!s||"Necesario."}},errMsg:"",hasErr:!1}},computed:{credentials:function(){var s={query:"\n                query Login($email: String!, $password: String!){\n                    login(email: $email, password: $password)\n                    {\n                        userId\n                        token\n                        tokenExpiration\n                        name\n                        role\n                    }\n                }\n            ",variables:{email:this.usuario,password:this.password}};return s}},methods:{clearForm:function(){this.usuario="",this.password="",this.hasErr=!1,this.errMsg="",this.$refs.form.reset()},submit:function(){var s=this;this.usuario&&this.password&&0!==this.usuario.trim().legth&&0!==this.password.trim().legth?(this.$store.commit("loading",!0),this.$store.dispatch("login",this.credentials).then(function(t){return 200===t.status||201===t.status?(s.$store.dispatch("startTime"),s.$store.dispatch("loadData"),s.$router.push({name:"Escritorio"})):s.$store.dispatch("toggleAlert",{msg:"Hubo un problema. Error: ".concat(t.status," || ").concat(t.statusText),class:"warning",active:!0}),s.$store.commit("loading",!1),t}).then(function(t){s.$store.dispatch("toggleAlert",{msg:"Bienvenido ".concat(s.$store.state.auth.name),class:"success",active:!0})}).catch(function(s){return console.log(s)}),this.clearForm(),this.$store.commit("loading",!1)):(this.hasErr=!0,this.errMsg="Todos los campos son requeridos")}}}),i=o,n=r("2877"),u=Object(n["a"])(i,e,a,!1,null,null,null);u.options.__file="Login.vue";t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d2086b7.d1ee49ed.js.map